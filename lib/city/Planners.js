// Generated by CoffeeScript 1.7.1
define(['city/MessageBoard', 'city/RoadMaker'], function(MessageBoard, RoadMaker) {
  var NodeInterconnectivityPlanner, Planners, RoadPlanner;
  console.log("Loaded city/Planners.coffee");
  Planners = (function() {
    var planners;

    Planners.planner_breed = 'planners';

    planners = null;

    function Planners(planners) {
      this.planners = planners;
      this.planners.setDefault('hidden', true);
    }

    Planners.prototype.spawn_road_planner = function() {
      return this.spawn_planner(RoadPlanner.prototype);
    };

    Planners.prototype.spawn_node_planner = function() {
      return this.spawn_planner(NodeInterconnectivityPlanner.prototype);
    };

    Planners.prototype.spawn_planner = function(prototype) {
      var planner;
      planner = this.planners.create(1)[0];
      extend(planner, prototype);
      planner.init();
      return planner;
    };

    return Planners;

  })();
  NodeInterconnectivityPlanner = (function() {
    function NodeInterconnectivityPlanner() {}

    NodeInterconnectivityPlanner.prototype.init = function() {
      return this.msg_reader = MessageBoard.get_board('connect_nodes');
    };

    NodeInterconnectivityPlanner.prototype.step = function() {
      var msg;
      msg = this.msg_reader.get_message();
      if (msg != null) {
        return RoadMaker.spawn_road_connector(msg.patch_a, msg.patch_b);
      }
    };

    return NodeInterconnectivityPlanner;

  })();
  RoadPlanner = (function() {
    function RoadPlanner() {}

    RoadPlanner.prototype.init = function() {
      return this.msg_reader = MessageBoard.get_board('build_endpoint');
    };

    RoadPlanner.prototype.step = function() {
      var msg;
      msg = this.msg_reader.get_message();
      if (msg != null) {
        return RoadMaker.spawn_road_extender(msg.patch);
      }
    };

    return RoadPlanner;

  })();
  return Planners;
});
